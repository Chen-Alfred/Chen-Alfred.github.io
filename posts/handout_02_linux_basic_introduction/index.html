<!DOCTYPE html>


<html lang="zh-tw" data-theme="">
<head>
    
        
<meta charset="utf-8">
<meta name="HandheldFriendly" content="True">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer-when-downgrade">

<title>Alfred 的教學筆記 02 - Linux 指令介紹 - Alfred Chen</title>

<meta name="description" content="內容：Linux 指令介紹">





<link rel="icon" type="image/x-icon" href="favicon.ico">
<link rel="apple-touch-icon-precomposed" href="favicon.png">


<style>
  body {
    visibility: hidden;
    opacity: 0;
  }
</style>

<noscript>
  <style>
    body {
      visibility: visible;
      opacity: 1;
    }
  </style>
</noscript>



    





    
    
        
    
    

    
        <link rel="stylesheet" href="/css/style.min.65a6fe530f7f8ef21128f582fec92c4cf1e7ba18ed6aad0eadf7b1bb42f2d616.css" integrity="sha256-Zab&#43;Uw9/jvIRKPWC/sksTPHnuhjtaq0Orfexu0Ly1hY=">
    





    

    





    
    
        
    
    

    
        <script src="/js/script.min.74bf1a3fcf1af396efa4acf3e660e876b61a2153ab9cbe1893ac24ea6d4f94ee.js" type="text/javascript" charset="utf-8" integrity="sha256-dL8aP88a85bvpKzz5mDodrYaIVOrnL4Yk6wk6m1PlO4="></script>
    







<meta property="og:title" content="Alfred 的教學筆記 02 - Linux 指令介紹" />
<meta property="og:description" content="內容：Linux 指令介紹" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/handout_02_linux_basic_introduction/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-01-01T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-01-01T00:00:00+00:00" />


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Alfred 的教學筆記 02 - Linux 指令介紹"/>
<meta name="twitter:description" content="內容：Linux 指令介紹"/>



    
        <link rel="webmention" href="https://webmention.io/hugo-theme-anubis/webmention" />
        
            <link rel="pingback" href="https://webmention.io/hugo-theme-anubis/xmlrpc" />
        
    
    
        <link rel="webmention" href="https://yourdomain.com/webemntions/receive" />
    






    
<script async src="https://www.googletagmanager.com/gtag/js?id=G-12345"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-12345', { 'anonymize_ip': false });
}
</script>





    
</head>
<body>
    <a class="skip-main" href="#main">Skip to main content</a>
    <div class="container">
        <header class="common-header"> 
            
                <div class="header-top">
    <h1 class="site-title">
    <a href="/">Alfred Chen</a>
</h1>
    <ul class="social-icons">


    
        <li>
            <a href="https://Chen-Alfred.github.io/" title="Github" rel="me">
            <span class="inline-svg" >




    
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

</span>

            </a>
        </li>
    

    
        
        
        <li>
            <a href="mailto:achieve0616@gmail.com" title="Email" rel="me">
            <span class="inline-svg" >




    
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M464 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm0 48v40.805c-22.422 18.259-58.168 46.651-134.587 106.49-16.841 13.247-50.201 45.072-73.413 44.701-23.208.375-56.579-31.459-73.413-44.701C106.18 199.465 70.425 171.067 48 152.805V112h416zM48 400V214.398c22.914 18.251 55.409 43.862 104.938 82.646 21.857 17.205 60.134 55.186 103.062 54.955 42.717.231 80.509-37.199 103.053-54.947 49.528-38.783 82.032-64.401 104.947-82.653V400H48z"/></svg>

</span>

            </a>
        </li>
    

    
        <li>
            <a href="https://www.facebook.com/ciphero0616" title="Facebook" rel="me">
            <span class="inline-svg" >




    
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>

</span>

            </a>
        </li>
    




</ul>
</div>

    <nav>
        
        
        <a class="" href="/about/" title="about">About</a>
        
        <a class="" href="/posts/" title="posts">Posts</a>
        
        <a class="" href="/tags/" title="tags">Tags</a>
        
        <a class="" href="/categories/" title="categories">Categories</a>
        
    </nav>






            
        </header>
        <main id="main" tabindex="-1"> 
            
    

    <article class="post h-entry">
        <div class="post-header">
            <header>
                <h1 class="p-name post-title">Alfred 的教學筆記 02 - Linux 指令介紹</h1>

                
            </header>
        </div>
        <div class="content e-content">
            <hr>
<h2 id="一建立-linux-指令使用環境" >一、建立 Linux 指令使用環境
<span>
    <a href="#%e4%b8%80%e5%bb%ba%e7%ab%8b-linux-%e6%8c%87%e4%bb%a4%e4%bd%bf%e7%94%a8%e7%92%b0%e5%a2%83">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><ul>
<li><input disabled="" type="checkbox"> 1. 裝 Linux 作業系統 (含VM)</li>
<li><input checked="" disabled="" type="checkbox"> 2. 裝 git bash (on Windows)</li>
<li><input checked="" disabled="" type="checkbox"> 3. 裝 Cygwin (on Windows)</li>
<li><input checked="" disabled="" type="checkbox"> 4. 裝 WSL (on Windows)</li>
<li><input disabled="" type="checkbox"> 5. 下載 UnxUtils 工具 (on Windows)</li>
<li><input disabled="" type="checkbox"> 6. 公司或開發團隊所提供之 Linux 環境</li>
</ul>
<p>※ 一般 Windows 使用者推薦方法 2、3、4</p>
<hr>
<h2 id="二基本指令" >二、基本指令
<span>
    <a href="#%e4%ba%8c%e5%9f%ba%e6%9c%ac%e6%8c%87%e4%bb%a4">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><ul>
<li>pwd：顯示目前所在的絕對路徑</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ pwd
</span></span><span style="display:flex;"><span>/c/Users/cfchen
</span></span></code></pre></div><ul>
<li>cd：改變目前所在的路徑</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cd Desktop    <span style="color:#75715e">#進入Desktop目錄</span>
</span></span><span style="display:flex;"><span>$ pwd
</span></span><span style="display:flex;"><span>/c/Users/cfchen/Desktop
</span></span><span style="display:flex;"><span>$ cd            <span style="color:#75715e">#回到個人HOME目錄 (相當於「cd ~」、「cd $HOME」)</span>
</span></span><span style="display:flex;"><span>$ pwd
</span></span><span style="display:flex;"><span>/c/Users/cfchen
</span></span></code></pre></div><ul>
<li>env：查看目前所有環境變數</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ env
</span></span><span style="display:flex;"><span>USERDOMAIN<span style="color:#f92672">=</span>cfchen-PC
</span></span><span style="display:flex;"><span>OS<span style="color:#f92672">=</span>Windows_NT
</span></span><span style="display:flex;"><span>COMMONPROGRAMFILES<span style="color:#f92672">=</span>C:<span style="color:#ae81ff">\P</span>rogram Files<span style="color:#ae81ff">\C</span>ommon Files
</span></span><span style="display:flex;"><span>PROCESSOR_LEVEL<span style="color:#f92672">=</span><span style="color:#ae81ff">6</span>
</span></span><span style="display:flex;"><span>PSModulePath<span style="color:#f92672">=</span>C:<span style="color:#ae81ff">\W</span>INDOWS<span style="color:#ae81ff">\s</span>ystem32<span style="color:#ae81ff">\W</span>indowsPowerShell<span style="color:#ae81ff">\v</span>1.0<span style="color:#ae81ff">\M</span>odules<span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>CommonProgramW6432<span style="color:#f92672">=</span>C:<span style="color:#ae81ff">\P</span>rogram Files<span style="color:#ae81ff">\C</span>ommon Files
</span></span><span style="display:flex;"><span>CommonProgramFiles<span style="color:#f92672">(</span>x86<span style="color:#f92672">)=</span>C:<span style="color:#ae81ff">\P</span>rogram Files <span style="color:#f92672">(</span>x86<span style="color:#f92672">)</span><span style="color:#ae81ff">\C</span>ommon Files
</span></span><span style="display:flex;"><span>FP_NO_HOST_CHECK<span style="color:#f92672">=</span>NO
</span></span><span style="display:flex;"><span>LANG<span style="color:#f92672">=</span>C.UTF-8
</span></span><span style="display:flex;"><span>MSYSTEM_CARCH<span style="color:#f92672">=</span>x86_64
</span></span><span style="display:flex;"><span>......<span style="color:#f92672">(</span>下略<span style="color:#f92672">)</span>......
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ env | grep LANG
</span></span><span style="display:flex;"><span>LANG<span style="color:#f92672">=</span>C.UTF-8
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ env | grep CLASSPATH
</span></span><span style="display:flex;"><span>CLASSPATH<span style="color:#f92672">=</span>.;D:<span style="color:#ae81ff">\e</span>clipse<span style="color:#ae81ff">\w</span>orkspace<span style="color:#ae81ff">\M</span>yProject<span style="color:#ae81ff">\a</span>pache-ant-1.7.1<span style="color:#ae81ff">\l</span>ib<span style="color:#ae81ff">\a</span>nt.jar;D:<span style="color:#ae81ff">\e</span>clipse<span style="color:#ae81ff">\w</span>orkspace<span style="color:#ae81ff">\M</span>yProject<span style="color:#ae81ff">\c</span>ommons-cli-1.4<span style="color:#ae81ff">\c</span>ommons-cli-1.4.jar;D:<span style="color:#ae81ff">\e</span>clipse<span style="color:#ae81ff">\w</span>orkspace<span style="color:#ae81ff">\M</span>yProject<span style="color:#ae81ff">\j</span>sch-0.1.48.jar
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ env | grep ^PATH
</span></span><span style="display:flex;"><span>PATH<span style="color:#f92672">=</span>/c/Users/cfchen/bin:/mingw64/bin:/usr/local/bin:/usr/bin:/bin:/mingw64/bin:/usr/bin:/c/Users/cfchen/bin:/c/Program Files/AdoptOpenJDK/jdk-8.0.282.8-hotspot/bin
</span></span></code></pre></div><ul>
<li>alias：設定指令的別名
<ul>
<li>若使用 git batch，可在 ~/.bashrc 或 ~/.bash_profile 中進行設定。</li>
<li>若使用 Linux 作業系統，可在 ~/.bashrc 中進行設定。</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ alias
</span></span><span style="display:flex;"><span>alias ll<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ls -al&#39;</span>
</span></span><span style="display:flex;"><span>alias ls<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ls -F --color=auto --show-control-chars&#39;</span>
</span></span><span style="display:flex;"><span>alias wd<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cd /d/work/FIA&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ wd
</span></span><span style="display:flex;"><span>$ pwd
</span></span><span style="display:flex;"><span>/d/work/FIA
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 補充：透過 ${BASH_ALIASES} 陣列變數將 alias 作為參數</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 範例：</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 先建立一個 alias，其值為某路徑</span>
</span></span><span style="display:flex;"><span>$ alias | grep wd2
</span></span><span style="display:flex;"><span>alias wd2<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;/d/work/FIA&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># alias 無法直接用來當作參數</span>
</span></span><span style="display:flex;"><span>$ cd wd2
</span></span><span style="display:flex;"><span>bash: cd: wd2: No such file or directory
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 但透過 ${BASH_ALIASES} 陣列變數，就可以將 alias 當作參數</span>
</span></span><span style="display:flex;"><span>$ cd <span style="color:#e6db74">${</span>BASH_ALIASES[wd2]<span style="color:#e6db74">}</span>
</span></span><span style="display:flex;"><span>$ pwd
</span></span><span style="display:flex;"><span>/d/work/FIA
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 範例：尋找當前目錄下的 csv 檔，並輸出到 ll (即 ls -al) 來查詢。</span>
</span></span><span style="display:flex;"><span>$ echo <span style="color:#e6db74">${</span>BASH_ALIASES[@]<span style="color:#e6db74">}</span>  <span style="color:#75715e"># 印出 BASH_ALIASES 陣列變數中的所有元素，功能與「echo ${BASH_ALIASES[*]}」相同</span>
</span></span><span style="display:flex;"><span>ls -al cd /d/work/FIA ls -F --color<span style="color:#f92672">=</span>auto --show-control-chars
</span></span><span style="display:flex;"><span>$ echo <span style="color:#e6db74">${</span>BASH_ALIASES[ll]<span style="color:#e6db74">}</span>  <span style="color:#75715e"># 印出 ll 所代表的實際指令</span>
</span></span><span style="display:flex;"><span>ls -al
</span></span><span style="display:flex;"><span>$ find . -name <span style="color:#e6db74">&#34;*.csv&#34;</span> -exec <span style="color:#e6db74">${</span>BASH_ALIASES[ll]<span style="color:#e6db74">}</span> <span style="color:#f92672">{}</span> <span style="color:#ae81ff">\;</span>
</span></span><span style="display:flex;"><span>-rwxr-xr-x <span style="color:#ae81ff">1</span> cfchen None   <span style="color:#ae81ff">0</span> 十二  <span style="color:#ae81ff">6</span>  <span style="color:#ae81ff">2017</span> ./test0n.csv
</span></span><span style="display:flex;"><span>-rwxr-xr-x <span style="color:#ae81ff">1</span> cfchen None  <span style="color:#ae81ff">11</span> 十二  <span style="color:#ae81ff">8</span>  <span style="color:#ae81ff">2017</span> ./test0t.csv
</span></span><span style="display:flex;"><span>-rwxr-xr-x <span style="color:#ae81ff">1</span> cfchen None  <span style="color:#ae81ff">32</span> 十二 <span style="color:#ae81ff">11</span>  <span style="color:#ae81ff">2017</span> ./test1n.csv
</span></span><span style="display:flex;"><span>-rwxr-xr-x <span style="color:#ae81ff">1</span> cfchen None  <span style="color:#ae81ff">45</span> 十二  <span style="color:#ae81ff">8</span>  <span style="color:#ae81ff">2017</span> ./test1t.csv
</span></span><span style="display:flex;"><span>-rwxr-xr-x <span style="color:#ae81ff">1</span> cfchen None <span style="color:#ae81ff">308</span> 十二 <span style="color:#ae81ff">11</span>  <span style="color:#ae81ff">2017</span> ./test2n.csv
</span></span><span style="display:flex;"><span>-rwxr-xr-x <span style="color:#ae81ff">1</span> cfchen None <span style="color:#ae81ff">321</span> 十二  <span style="color:#ae81ff">7</span>  <span style="color:#ae81ff">2017</span> ./test2t.csv
</span></span><span style="display:flex;"><span>-rwxr-xr-x <span style="color:#ae81ff">1</span> cfchen None <span style="color:#ae81ff">321</span> 十二 <span style="color:#ae81ff">11</span>  <span style="color:#ae81ff">2017</span> ./testxt.csv
</span></span></code></pre></div><ul>
<li>
<p>man：線上說明文件</p>
<ul>
<li>git bash無此功能 (可以改用：<strong>指令名稱 &ndash;help</strong>)</li>
<li>Linux 作業系統有</li>
</ul>
</li>
<li>
<p>type：顯示程式路徑 (由 $PATH 中尋找)</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ type gcc
</span></span><span style="display:flex;"><span>gcc is /c/Program Files <span style="color:#f92672">(</span>x86<span style="color:#f92672">)</span>/mingw-w64/i686-8.1.0-posix-dwarf-rt_v6-rev0/mingw32/bin/gcc
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ type -a gcc
</span></span><span style="display:flex;"><span>gcc is /c/Program Files <span style="color:#f92672">(</span>x86<span style="color:#f92672">)</span>/mingw-w64/i686-8.1.0-posix-dwarf-rt_v6-rev0/mingw32/bin/gcc
</span></span><span style="display:flex;"><span>gcc is /c/cygwin64/bin/gcc
</span></span></code></pre></div><hr>
<h2 id="三檔案目錄查詢指令-檔案目錄權限" >三、檔案/目錄查詢指令： (檔案/目錄/權限)
<span>
    <a href="#%e4%b8%89%e6%aa%94%e6%a1%88%e7%9b%ae%e9%8c%84%e6%9f%a5%e8%a9%a2%e6%8c%87%e4%bb%a4-%e6%aa%94%e6%a1%88%e7%9b%ae%e9%8c%84%e6%ac%8a%e9%99%90">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><table>
<thead>
<tr>
<th>指令</th>
<th>說明</th>
</tr>
</thead>
<tbody>
<tr>
<td>ls</td>
<td>列出檔案清單 (只列出檔名)</td>
</tr>
<tr>
<td>ls -al</td>
<td>列出檔案清單 (列出所有檔名，並印出詳細資訊)</td>
</tr>
<tr>
<td>ls -alt | more</td>
<td>列出檔案清單，依檔案修改時間排序(由新到舊)，並逐頁顯示<br>※ more只能往下翻頁<br>※ 目前 git bash 沒有 more 功能，請改用 less</td>
</tr>
<tr>
<td>ls -altr | less</td>
<td>列出檔案清單，依檔案修改時間排序(由舊到新)，並逐頁顯示<br>※ less可以上下翻頁</td>
</tr>
<tr>
<td>ls -al | grep ^d</td>
<td>只列出目錄清單</td>
</tr>
<tr>
<td>ls -al | grep csv$</td>
<td>只列出「csv」結尾之檔名<br>※功能與「ls -al *csv」相同</td>
</tr>
</tbody>
</table>
<p>參考網址：http://linux.vbird.org/linux_basic/0220filemanager.php#ls</p>
<hr>
<h2 id="四檔案目錄操作指令" >四、檔案/目錄操作指令：
<span>
    <a href="#%e5%9b%9b%e6%aa%94%e6%a1%88%e7%9b%ae%e9%8c%84%e6%93%8d%e4%bd%9c%e6%8c%87%e4%bb%a4">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><p>參考網址：http://linux.vbird.org/linux_basic/0220filemanager.php</p>
<table>
<thead>
<tr>
<th>指令</th>
<th>說明</th>
</tr>
</thead>
<tbody>
<tr>
<td>cp</td>
<td>複製檔案或目錄<br>語法：cp 來源檔 目標檔</td>
</tr>
<tr>
<td>mv</td>
<td>移動檔案與目錄，或更名<br>語法：mv 來源檔 目標檔</td>
</tr>
<tr>
<td>rm</td>
<td>移除檔案<br>語法：rm 檔案</td>
</tr>
<tr>
<td>rm -rf</td>
<td>強制且遞迴移除檔案或目錄<br>語法：rm -rf 檔案或目錄</td>
</tr>
<tr>
<td>mkdir</td>
<td>建立新目錄<br>語法：mkdir 目錄名稱</td>
</tr>
<tr>
<td>rmdir</td>
<td>刪除「空的」目錄<br>語法：rmdir 目錄名稱</td>
</tr>
<tr>
<td>touch</td>
<td>建立新檔或修改檔案時間<br>語法：touch 檔案</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>chmod：改變檔案或目錄的權限 (用八進位表示法來代表權限 ==&gt; r:4 w:2 x:1)</p>
<ul>
<li>語法：chmod [-R] xyz 檔案或目錄</li>
<li>選項與參數：
<ul>
<li>xyz : 數字類型的權限屬性，為 rwx 屬性數值的相加，x/y/z 分別為 owner/group/others 的權限。</li>
<li>-R : 進行遞迴(recursive)的持續變更，亦即連同次目錄下的所有檔案都會變更</li>
</ul>
</li>
<li>參考網址：http://linux.vbird.org/linux_basic/0210filepermission.php#chmod</li>
</ul>
</li>
<li>
<p>chown：改變檔案的擁有者</p>
<ul>
<li>語法：chown [-R] 帳號名稱 檔案或目錄</li>
<li>語法：chown [-R] 帳號名稱:群組名稱 檔案或目錄</li>
<li>選項與參數：
<ul>
<li>-R : 進行遞迴(recursive)的持續變更，亦即連同次目錄下的所有檔案都變更</li>
</ul>
</li>
<li>參考網址：http://linux.vbird.org/linux_basic/0210filepermission.php#chown</li>
</ul>
</li>
<li>
<p>chgrp：改變檔案的群組</p>
<ul>
<li>語法：chgrp [-R] 群組名稱 檔案或目錄</li>
<li>選項與參數：
<ul>
<li>-R : 進行遞迴(recursive)的持續變更，亦即連同次目錄下的所有檔案、目錄 都更新成為這個群組之意。</li>
</ul>
</li>
<li>參考網址：http://linux.vbird.org/linux_basic/0210filepermission.php#chgrp</li>
</ul>
</li>
</ul>
<hr>
<h2 id="五檔案描述元輸出輸入轉向管線" >五、檔案描述元、輸出/輸入轉向、管線：
<span>
    <a href="#%e4%ba%94%e6%aa%94%e6%a1%88%e6%8f%8f%e8%bf%b0%e5%85%83%e8%bc%b8%e5%87%ba%e8%bc%b8%e5%85%a5%e8%bd%89%e5%90%91%e7%ae%a1%e7%b7%9a">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><ul>
<li>檔案描述元 (File Descriptors)
執行某一指令時，一定會有三個檔案與這個指令有關係。在 Linux shell 中，這三個檔案會用一個整數來表示，我們稱為檔案描述元 (File Descriptors)。</li>
</ul>
<table>
<thead>
<tr>
<th>名稱</th>
<th>說明</th>
<th>File Descriptors</th>
</tr>
</thead>
<tbody>
<tr>
<td>STDIN</td>
<td>標準輸入</td>
<td>0</td>
</tr>
<tr>
<td>STDOUT</td>
<td>標準輸出</td>
<td>1</td>
</tr>
<tr>
<td>STDERR</td>
<td>標準錯誤輸出</td>
<td>2</td>
</tr>
</tbody>
</table>
<ul>
<li>輸出/輸入轉向</li>
</ul>
<table>
<thead>
<tr>
<th>符號</th>
<th>說明</th>
</tr>
</thead>
<tbody>
<tr>
<td>&gt;</td>
<td>輸出轉向</td>
</tr>
<tr>
<td>&raquo;</td>
<td>輸出轉向 (附加)</td>
</tr>
<tr>
<td>&lt;</td>
<td>輸入轉向</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>#</th>
<th>指令</th>
<th>說明</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>cmd &gt; file</td>
<td>將標準輸出導入檔案</td>
</tr>
<tr>
<td>2</td>
<td>cmd 1&gt; file</td>
<td>同上</td>
</tr>
<tr>
<td>3</td>
<td>cmd &raquo; file</td>
<td>將標準輸出附加到檔案之後</td>
</tr>
<tr>
<td>4</td>
<td>cmd 1&raquo; file</td>
<td>同上</td>
</tr>
<tr>
<td>5</td>
<td>cmd 2&gt; file</td>
<td>將標準錯誤輸出導入檔案</td>
</tr>
<tr>
<td>6</td>
<td>cmd 2&raquo; file</td>
<td>將標準錯誤輸出附加到檔案之後</td>
</tr>
<tr>
<td>7</td>
<td>cmd &lt; file</td>
<td>由檔案中讀取內容當成標準輸入</td>
</tr>
<tr>
<td>8</td>
<td>cmd 0&lt; file</td>
<td>同上</td>
</tr>
<tr>
<td>9</td>
<td>cmd 1&gt; file1 2&gt; file2</td>
<td>將標準輸出導入到file1，且標準錯誤輸出導入到file2</td>
</tr>
<tr>
<td>10</td>
<td>cmd &gt; file1 2&gt; file2</td>
<td>同上</td>
</tr>
<tr>
<td>11</td>
<td>cmd &gt; file 2&gt;&amp;1</td>
<td>將標準輸出與標準錯誤輸出導入到同一檔案中</td>
</tr>
<tr>
<td>12</td>
<td>cmd &raquo; file 2&gt;&amp;1</td>
<td>將標準輸出與標準錯誤輸出附加到同一檔案中</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e">#  有時候我們不想看到標準錯誤輸出，可以將其導向 /dev/null #</span>
</span></span><span style="display:flex;"><span>$ rm -rf tmp_dir &gt; /dev/null 2&gt;&amp;1; mkdir tmp_dir
</span></span></code></pre></div><ul>
<li>
<p>管線 (Pipeline)
Linux 中大部分的指令，都可以用檔案作為處理的介質，也大部分都可以從標準輸入(STDIN)中讀取輸入值。我們可以利用這種特性，讓許多程式的輸出變成其他程式的輸入，這種將「某程式的輸出轉向變成某程式的輸入」的做法，是由一種稱為「管線」(Pipeline)的機制所達成。</p>
<ul>
<li>語法：cmd1 | cmd2 | &hellip;
將 cmd1 的輸出資料連結到 cmd2 的輸入&hellip;以此類推。</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ cat file | less  <span style="color:#75715e">#輸出檔案內容，並且分頁顯示</span>
</span></span><span style="display:flex;"><span>$ cat file | sort  <span style="color:#75715e">#輸出檔案內容，並且排序</span>
</span></span><span style="display:flex;"><span>$ sort file | uniq <span style="color:#75715e">#對檔案內容進行排序，並且輸出不重複的值</span>
</span></span></code></pre></div><hr>
<h2 id="六資料查詢處理指令" >六、資料查詢/處理指令：
<span>
    <a href="#%e5%85%ad%e8%b3%87%e6%96%99%e6%9f%a5%e8%a9%a2%e8%99%95%e7%90%86%e6%8c%87%e4%bb%a4">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><ul>
<li>
<p>cat：印出檔案的內容</p>
<ul>
<li>語法：cat 檔案1 檔案2 &hellip;</li>
<li>選項與參數：
<ul>
<li>-n ：印出列數</li>
<li>-b ：印出列數 (不計算空白列)</li>
</ul>
</li>
<li>參考網址：http://linux.vbird.org/linux_basic/0220filemanager.php#cat</li>
</ul>
</li>
<li>
<p>more (less)：印出檔案的內容，並可每頁閱讀</p>
<ul>
<li>more 只能往下翻頁</li>
<li>less 可以上下翻頁</li>
<li>參考網址：http://linux.vbird.org/linux_basic/0220filemanager.php#more</li>
<li>參考網址：http://linux.vbird.org/linux_basic/0220filemanager.php#less</li>
</ul>
</li>
<li>
<p>head：取出檔案/資料前面幾列</p>
<ul>
<li>語法：head [-n number] 檔案</li>
<li>參考網址：http://linux.vbird.org/linux_basic/0220filemanager.php#head</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># 產生序列 1~10，但只取出前 3 列 #</span>
</span></span><span style="display:flex;"><span>$ seq <span style="color:#ae81ff">10</span> | head -3
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>
</span></span></code></pre></div><ul>
<li>tail：取出檔案/資料後面幾列
<ul>
<li>語法：tail [-n number] [-f] 檔案</li>
<li>選項與參數：
<ul>
<li>-f : 當檔案正在成長時(例如log檔)，輸出所增加的內容。</li>
</ul>
</li>
<li>參考網址：http://linux.vbird.org/linux_basic/0220filemanager.php#tail</li>
<li>參考網址 ：https://linuxhint.com/sed-command-to-delete-a-line/   (利用 sed 限制列數)</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># 產生序列 1~10，但只取出後 3 列 #</span>
</span></span><span style="display:flex;"><span>$ seq <span style="color:#ae81ff">10</span> | tail -3
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10</span>
</span></span></code></pre></div><ul>
<li>如果要取出檔案/資料中間幾列？ ==&gt; 結合 head 與 tail</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># 產生序列 1~1000，但只取出第 601~603 列 #</span>
</span></span><span style="display:flex;"><span>$ seq <span style="color:#ae81ff">1000</span> | head -603 | tail -3
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">601</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">602</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">603</span>
</span></span><span style="display:flex;"><span>$ seq <span style="color:#ae81ff">1000</span> | tail -400 | head -3
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">601</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">602</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">603</span>
</span></span></code></pre></div><ul>
<li>如果「不要」取出檔案/資料前幾列？後幾列？</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># 不取出第 1 列 (取 2~N 列) #</span>
</span></span><span style="display:flex;"><span>$ seq <span style="color:#ae81ff">5</span> | tail -n+2
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 不取出最後 1 列 (取 1~N-1列) #</span>
</span></span><span style="display:flex;"><span>$ seq <span style="color:#ae81ff">5</span> | head -n-1
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>
</span></span></code></pre></div><ul>
<li>wc：計算檔案裡面的列數、字數、字元數
<ul>
<li>語法：wc [-lwm] 檔案</li>
<li>選項與參數：
<ul>
<li>-l ：印出列數</li>
<li>-w ：印出字數 (英文單字)</li>
<li>-m ：印出字元數</li>
</ul>
</li>
<li>參考網址：http://linux.vbird.org/linux_basic/0320bash.php#wc</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># 產生序列 2,4,6,8,...,1000，並計算筆數 #</span>
</span></span><span style="display:flex;"><span>$ seq <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">1000</span> | wc
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">500</span>     <span style="color:#ae81ff">500</span>    <span style="color:#ae81ff">1948</span>
</span></span><span style="display:flex;"><span>$ seq <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">1000</span> | wc -l
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">500</span>
</span></span></code></pre></div><ul>
<li>grep：分析檔案中的每一列內容，若當中有我們所需要的資訊，就將該列印出
<ul>
<li>語法：grep [-acinvo] &lsquo;搜尋字串&rsquo; 檔案</li>
<li>選項與參數：
<ul>
<li>-a ：將 binary 檔案以 text 檔案的方式搜尋資料</li>
<li>-c ：計算找到 &lsquo;搜尋字串&rsquo; 的次數</li>
<li>-i ：忽略大小寫的不同，所以大小寫視為相同</li>
<li>-n ：輸出第幾列</li>
<li>-v ：反向選擇，亦即顯示出沒有 &lsquo;搜尋字串&rsquo; 內容的那一行</li>
<li>-o ：僅列印出符合搜尋字串的部分</li>
</ul>
</li>
<li>參考網址：http://linux.vbird.org/linux_basic/0320bash.php#grep</li>
<li>【應用實例】Trinity Decoder + Regular Expression &ndash;&gt; 程式碼品質管理制度。</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># 產生序列 1~50，取出數字中有 0 的 #</span>
</span></span><span style="display:flex;"><span>$ seq <span style="color:#ae81ff">50</span> | grep <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">20</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">30</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">40</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">50</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 產生序列 1~50，取出數字中不含 2~8 的 #</span>
</span></span><span style="display:flex;"><span>$ seq <span style="color:#ae81ff">50</span> | grep -v <span style="color:#f92672">[</span>2-8<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">11</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">19</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 產生序列 1~50，取出數字為 5 開頭的 #</span>
</span></span><span style="display:flex;"><span>$ seq <span style="color:#ae81ff">50</span> | grep ^5
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">50</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 產生序列 1~50，取出數字為 9 結尾的 #</span>
</span></span><span style="display:flex;"><span>$ seq <span style="color:#ae81ff">50</span> | grep 9$
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">19</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">29</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">39</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">49</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 只列出目錄清單</span>
</span></span><span style="display:flex;"><span>$ ls -al | grep ^d
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 利用作業一的資料集 (下載：https://data.gov.tw/dataset/8355 )</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 找出所有「臺北市」的資料：</span>
</span></span><span style="display:flex;"><span>$ grep <span style="color:#e6db74">&#34;臺北市&#34;</span> 8355.csv
</span></span><span style="display:flex;"><span>2010,臺北市<span style="color:#f92672">(</span>Taipei City<span style="color:#f92672">)</span>,164988,11655609954340,7115920545739,2246351110702,855771119711,1437640684350,99098220195,72775434842
</span></span><span style="display:flex;"><span>2011,臺北市<span style="color:#f92672">(</span>Taipei City<span style="color:#f92672">)</span>,167653,12163329809495,7493852428587,2316904340647,898202307119,1454240880040,102745610225,77387387579
</span></span><span style="display:flex;"><span>2012,臺北市<span style="color:#f92672">(</span>Taipei City<span style="color:#f92672">)</span>,170744,11919483513103,7562067682497,2183535147387,941534418304,1231551629607,101056813365,72488269402
</span></span><span style="display:flex;"><span>2013,臺北市<span style="color:#f92672">(</span>Taipei City<span style="color:#f92672">)</span>,173819,12058583782802,7711309282999,2209514369483,1041575123869,1095315637909,109963704927,67796384109
</span></span><span style="display:flex;"><span>2014,臺北市<span style="color:#f92672">(</span>Taipei City<span style="color:#f92672">)</span>,177899,12853462046481,8118659924524,2230937138751,1096429765948,1213701692172,128279585053,68245273882
</span></span><span style="display:flex;"><span>2015,臺北市<span style="color:#f92672">(</span>Taipei City<span style="color:#f92672">)</span>,182517,12465638326463,8071756625341,2091143638211,1118255119287,1184475629159,141330077594,59647343575
</span></span><span style="display:flex;"><span>2016,臺北市<span style="color:#f92672">(</span>Taipei City<span style="color:#f92672">)</span>,186220,12063519560310,7905146270308,1886443346412,977837497831,1222970886083,140988898158,51532820406
</span></span><span style="display:flex;"><span>2017,臺北市<span style="color:#f92672">(</span>Taipei City<span style="color:#f92672">)</span>,189965,12418125142973,8220427315333,1984925545837,1082783201286,1129117114195,144789241656,53372837362
</span></span><span style="display:flex;"><span>2018,臺北市<span style="color:#f92672">(</span>Taipei City<span style="color:#f92672">)</span>,193424,13081180006541,8603735949350,2055116511218,1151854754058,1270447562753,151066973273,56262153146
</span></span><span style="display:flex;"><span>2019,臺北市<span style="color:#f92672">(</span>Taipei City<span style="color:#f92672">)</span>,195736,13403192015313,8825927383860,2005407123013,1263834596392,1308367451511,158798125087,53110156940
</span></span><span style="display:flex;"><span>2020,臺北市<span style="color:#f92672">(</span>Taipei City<span style="color:#f92672">)</span>,196897,13672656761171,9152177840748,1897947463677,1313685509984,1308845946762,170324427435,52898866537
</span></span></code></pre></div><table>
<thead>
<tr>
<th>練習1</th>
</tr>
</thead>
<tbody>
<tr>
<td>一、請先至網址下載資料：https://data.gov.tw/dataset/8355<br>二、利用 shell 指令解決下列問題：<br>(1).請問這個檔案總共有幾列資料？<br>(2).請取出檔案中，年度屬於2019年的資料列(不要合計)</td>
</tr>
</tbody>
</table>
<ul>
<li>cut：
<ul>
<li>語法1：cut -c 字元區間
<ul>
<li>適用於以「固定長度」區分欄位的資料格式</li>
</ul>
</li>
<li>語法2：cut -d &lsquo;分隔字元&rsquo; -f 指定欄位
<ul>
<li>適用於以「分隔符號」區分欄位的資料格式</li>
</ul>
</li>
<li>範例1：取出檔案中每列位置 x1~x2 的內容
<ul>
<li>語法：cut -c x1-x2 檔案</li>
</ul>
</li>
<li>範例2：取出檔案中每列位置 x1~x2 與 x3~x4 的內容
<ul>
<li>語法：cut -c x1-x2,x3-x4 檔案</li>
</ul>
</li>
<li>範例3：以逗號分隔，取出檔案中每列的第 2 欄
<ul>
<li>語法：cut -d , -f 2 檔案</li>
</ul>
</li>
<li>範例4：以逗號分隔，取出檔案中每列的第 1,3,4 欄
<ul>
<li>語法：cut -d , -f 1,3-4 檔案</li>
</ul>
</li>
<li>範例5：以逗號分隔，取出檔案中每列的第 1,3-4 欄，輸出時以&quot;||&ldquo;分隔欄位
<ul>
<li>語法：cut -d , -f 1,3-4 &ndash;output-delimiter=&quot;||&rdquo; 檔案</li>
</ul>
</li>
<li>參考網址：http://linux.vbird.org/linux_basic/0320bash.php#cut</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># 範例1：取位置第 1~4 碼(年度)之資料 #</span>
</span></span><span style="display:flex;"><span>$ cut -c 1-4 8355.csv | tail -3
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2020</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2020</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2020</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 範例2：取位置第 1~4 碼(年度), 6~14 碼(縣市別) 之資料 #</span>
</span></span><span style="display:flex;"><span>$ cut -c 1-4,6-14 8355.csv | tail -3
</span></span><span style="display:flex;"><span>2020臺東縣
</span></span><span style="display:flex;"><span>2020花蓮縣
</span></span><span style="display:flex;"><span>2020澎湖縣
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 範例3：以逗號分隔，取出檔案中每列的第 2 欄 #</span>
</span></span><span style="display:flex;"><span>$ cut -d , -f <span style="color:#ae81ff">2</span> 8355.csv | tail -3
</span></span><span style="display:flex;"><span>臺東縣<span style="color:#f92672">(</span>Taitung County<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>花蓮縣<span style="color:#f92672">(</span>Hualien County<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>澎湖縣<span style="color:#f92672">(</span>Penghu County<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 範例4：以逗號分隔，取出檔案中每列的第 1,3,4 欄 #</span>
</span></span><span style="display:flex;"><span>$ cut -d , -f 1,3-4 8355.csv | tail -3
</span></span><span style="display:flex;"><span>2020,5406,72612405514
</span></span><span style="display:flex;"><span>2020,10336,186887750438
</span></span><span style="display:flex;"><span>2020,2731,32775116184
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 範例5：以逗號分隔，取出檔案中每列的第 1,3-4 欄，輸出時以&#34;||&#34;分隔欄位 #</span>
</span></span><span style="display:flex;"><span>$ cut -d , -f 1,3-4 --output-delimiter<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;||&#34;</span> 8355.csv | tail -3
</span></span><span style="display:flex;"><span>2020<span style="color:#f92672">||</span>5406<span style="color:#f92672">||</span><span style="color:#ae81ff">72612405514</span>
</span></span><span style="display:flex;"><span>2020<span style="color:#f92672">||</span>10336<span style="color:#f92672">||</span><span style="color:#ae81ff">186887750438</span>
</span></span><span style="display:flex;"><span>2020<span style="color:#f92672">||</span>2731<span style="color:#f92672">||</span><span style="color:#ae81ff">32775116184</span>
</span></span></code></pre></div><table>
<thead>
<tr>
<th>練習2</th>
</tr>
</thead>
<tbody>
<tr>
<td>請繼續使用練習1的資料：<br>題目：請取出檔案中，屬於2019年內的所有縣市英文名稱(不要合計)</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>sort：將資料進行排序</p>
<ul>
<li>語法：sort [-bfnrtuk] 檔案</li>
<li>選項與參數：
<ul>
<li>-b ：參數忽略空白</li>
<li>-f ：比較文字時，不分大小寫</li>
<li>-u ：將重複出現的資料刪除，只留下一筆</li>
<li>-r ：以反向方式排序</li>
<li>-t ：指定欄位的分隔字元（預設為空白或tab）</li>
<li>-k ：指定欄位的編號 (sort -t, -k2,3 file)</li>
<li>-n ：讓資料根據實際數值的大小來排序(但須該欄皆為數字)</li>
</ul>
</li>
<li>參考網址：http://linux.vbird.org/linux_basic/0320bash.php#sort</li>
<li>參考網址：https://blog.gtwang.org/linux/linux-sort-command-tutorial-and-examples/</li>
</ul>
</li>
<li>
<p>uniq：取得不重複(或重複)的資料</p>
<ul>
<li>語法：uniq [-idDuc] 檔案</li>
<li>選項與參數：
<ul>
<li>-i ：忽略大小寫字元的不同</li>
<li>-d ：只輸出重複文字列(重複列只留下一筆)</li>
<li>-D ：只輸出重複文字列(重複列維持原狀)</li>
<li>-u ：只輸出沒有重複的文字行</li>
<li>-c ：刪除重複文字行之後，標示出每一行的重複次數</li>
</ul>
</li>
<li>參考網址：http://linux.vbird.org/linux_basic/0320bash.php#uniq</li>
<li>參考網址：https://blog.gtwang.org/linux/linux-uniq-command-tutorial/</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ seq <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">5</span> &gt; seq1
</span></span><span style="display:flex;"><span>$ seq <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">7</span> &gt; seq2
</span></span><span style="display:flex;"><span>$ cat seq1 seq2 | sort | uniq -d &gt; seq.dup
</span></span><span style="display:flex;"><span>$ cat seq.dup
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>$ cat seq1 seq.dup | sort | uniq -u
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>$ cat seq2 seq.dup | sort | uniq -u
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>
</span></span></code></pre></div><table>
<thead>
<tr>
<th>練習3</th>
</tr>
</thead>
<tbody>
<tr>
<td>請繼續使用練習1的資料：<br>題目：請比較 2010 年與 2011 年的縣市別有什麼差異？ (何者相同？何者不同？)</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>練習4</th>
</tr>
</thead>
<tbody>
<tr>
<td>一、本題請先進入乙測 Linux 主機。<br>二、~/.bash_history 是 Linux 作業系統中用來隨時儲存歷史指令的檔案。<br>三、題目：請利用 ~/.bash_history 找出在最近使用的 Linux 指令中，最常被使用的 10 個指令與其次數，並以次數做降冪排序 (只統計指令名稱而不含後面的參數，例如：「ls -al | grep ^d」則視為 ls 指令就好)<br> ※ 提示：<br>(1).先將 ~/.bash_history 複製到新的檔案(避免檔案一直被更新) <br>(2).先找出第一欄(指令名稱)<br>(3).排序<br>(4).計算次數<br>(5).依據次數+指令名稱再重新排序</td>
</tr>
</tbody>
</table>
<ul>
<li>diff：比對兩個檔案之間的差異
<ul>
<li>語法：diff [-bBi] 檔案1 檔案2</li>
<li>選項與參數：
<ul>
<li>-b ：忽略一行當中，僅有多個空白的差異(例如 &ldquo;about me&rdquo; 與 &ldquo;about     me&rdquo; 視為相同</li>
<li>-B ：忽略空白行的差異。</li>
<li>-i ：忽略大小寫的不同。</li>
</ul>
</li>
<li>參考網址：http://linux.vbird.org/linux_basic/0330regularex.php#diff</li>
<li>實例可參考 DDL generator 工具所產生的比對結果檔。</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ seq <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">5</span> &gt; seq1
</span></span><span style="display:flex;"><span>$ seq <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">7</span> &gt; seq2
</span></span><span style="display:flex;"><span>$ diff seq1 seq2
</span></span><span style="display:flex;"><span>1,2d0
</span></span><span style="display:flex;"><span>&lt; <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>&lt; <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>5a4,5
</span></span><span style="display:flex;"><span>&gt; <span style="color:#ae81ff">6</span>
</span></span><span style="display:flex;"><span>&gt; <span style="color:#ae81ff">7</span>
</span></span></code></pre></div><ul>
<li>tr：用來替換文字，或是刪除資料中的文字
<ul>
<li>語法：tr [-ds]&hellip; SET1 [SET2]</li>
<li>選項與參數：
<ul>
<li>-d ：刪除訊息當中的 SET1 這個字串</li>
<li>-s ：取代掉重複的字元(只取代一次)</li>
</ul>
</li>
<li>參考網址：http://linux.vbird.org/linux_basic/0320bash.php#tr</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ seq <span style="color:#ae81ff">8</span> <span style="color:#ae81ff">12</span> | tr -d <span style="color:#ae81ff">1</span>  <span style="color:#75715e">#產生序列 8~12，並刪除有 1 的字元</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ seq <span style="color:#ae81ff">60</span> <span style="color:#ae81ff">10</span> <span style="color:#ae81ff">100</span> | tr -s <span style="color:#ae81ff">0</span> X  <span style="color:#75715e">#產生序列 60, 70, ..., 100，並將 0 轉為 X</span>
</span></span><span style="display:flex;"><span>6X
</span></span><span style="display:flex;"><span>7X
</span></span><span style="display:flex;"><span>8X
</span></span><span style="display:flex;"><span>9X
</span></span><span style="display:flex;"><span>1X
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 注意：使用「tr -d &#39; &#39;」指令會將資料內的空白都全部刪除。</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 如果只要刪除字串前後的空白，應該改用 sed 工具。</span>
</span></span><span style="display:flex;"><span>$ echo <span style="color:#e6db74">&#39; 1 2 3 &#39;</span> | tr -d <span style="color:#e6db74">&#39; &#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">123</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ echo <span style="color:#e6db74">&#39; 1 2 3 &#39;</span> | sed <span style="color:#e6db74">&#39;s/^ *//g&#39;</span> | sed <span style="color:#e6db74">&#39;s/ *$//g&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># tr 指令也能幫忙將DOS文件轉換為UNIX/Linux文件</span>
</span></span><span style="display:flex;"><span>$ cat file | tr -d <span style="color:#e6db74">&#39;\r&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ dos2unix file          <span style="color:#75715e">#同上</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ unix2dos file          <span style="color:#75715e">#將UNIX/Linux文件轉換為DOS文件</span>
</span></span></code></pre></div><ul>
<li>od：閱讀非純文字檔 (或將文字轉為非純文字)
<ul>
<li>範例：將一段文字，以16進位、且每個位元分開顯示。
echo -n &ldquo;Hello&rdquo; | od -A n -t x1</li>
<li>參考網址：http://linux.vbird.org/linux_basic/0220filemanager.php#od</li>
<li>參考網址：https://stackoverflow.com/questions/6791798/convert-string-to-hexadecimal-on-command-line/6791875</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ echo -n <span style="color:#e6db74">&#34;Hello&#34;</span> | od -A n -t x1
</span></span><span style="display:flex;"><span> <span style="color:#ae81ff">48</span> <span style="color:#ae81ff">65</span> 6c 6c 6f
</span></span></code></pre></div><hr>
<h2 id="七vi-編輯器基本操作" >七、vi 編輯器基本操作：
<span>
    <a href="#%e4%b8%83vi-%e7%b7%a8%e8%bc%af%e5%99%a8%e5%9f%ba%e6%9c%ac%e6%93%8d%e4%bd%9c">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><ul>
<li>參考網址：http://linux.vbird.org/linux_basic/0310vi.php</li>
</ul>
<p><img src="https://i.imgur.com/2wNs40m.gif" alt=""></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>搜尋：
</span></span><span style="display:flex;"><span>於一般指令模式按「/」，輸入「<span style="color:#ae81ff">\&#34;</span>」 <span style="color:#f92672">(</span>搜尋雙引號<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>取代：
</span></span><span style="display:flex;"><span>於一般指令模式按「:」，輸入「%s/,/|/g」<span style="color:#f92672">(</span>將,變成|<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>刪除：
</span></span><span style="display:flex;"><span>於一般指令模式按「:」，輸入「%s/<span style="color:#ae81ff">\&#34;</span>//g」<span style="color:#f92672">(</span>刪除雙引號<span style="color:#f92672">)</span>
</span></span></code></pre></div><hr>
<h2 id="八psql--pg_dump-工具介紹-登入操作匯出資料操作" >八、psql / pg_dump 工具介紹 (登入操作/匯出資料操作)
<span>
    <a href="#%e5%85%abpsql--pg_dump-%e5%b7%a5%e5%85%b7%e4%bb%8b%e7%b4%b9-%e7%99%bb%e5%85%a5%e6%93%8d%e4%bd%9c%e5%8c%af%e5%87%ba%e8%b3%87%e6%96%99%e6%93%8d%e4%bd%9c">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><ul>
<li>
<p><strong>psql</strong>：psql is the PostgreSQL interactive terminal.</p>
<ul>
<li>
<p>選項與參數：</p>
<ul>
<li>-U ：database user name</li>
<li>-h ：database server host</li>
<li>-d ：database name</li>
<li>-p ：database server port (default: &ldquo;5432&rdquo;)</li>
<li>-c ：run only single command (SQL or internal) and exit</li>
<li>-t ：print rows only</li>
<li>-A ：unaligned table output mode</li>
<li>-F ：field separator for unaligned output (default: &ldquo;|&rdquo;)</li>
</ul>
</li>
<li>
<p>範例：</p>
<ol>
<li>執行 psql 程式，輸入密碼再進入，然後在裡面查詢與操作：
語法1：<code>psql -U user -h 127.0.0.1 -d dbname</code>
語法2：<code>psql -d dbname</code></li>
<li>直接在 shell 中利用 psql 工具匯出資料 (輸入密碼後，將查詢結果輸出至螢幕)：
語法1：<code>psql -U user -h 127.0.0.1 -d dbname -c &quot;SQL語法&quot;</code>
語法2：<code>psql -d dbname -c &quot;SQL語法&quot;</code></li>
</ol>
</li>
</ul>
</li>
<li>
<p><strong>pg_dump</strong>：pg_dump dumps a database as a text file or to other formats.</p>
<ul>
<li>
<p>選項與參數：</p>
<ul>
<li>-U：connect as specified database user</li>
<li>-d：database to dump</li>
<li>-x：do not dump privileges (grant/revoke)</li>
<li>-s：dump only the schema, no data</li>
<li>-t：dump the named table(s) only  (可使用萬用字元，例如 abc* 表示所有 abc 開頭的表格)</li>
</ul>
</li>
<li>
<p>範例：
語法：<code>pg_dump dbname -x -s -t [schema].[table_name]</code></p>
</li>
</ul>
</li>
<li>
<p>於個人筆電的 PostgreSQL 中練習：</p>
<ul>
<li>先在 PostgreSQL 中建立資料庫：mydb，並於其中建立 schema：stage。</li>
<li>練習之前，請先下載SQL，並在自己的資料庫中執行：https://drive.google.com/file/d/1Vf8tm8E7rk8ZqNjbKTqTNk4MxCpJNhHN/view?usp=sharing</li>
<li>可先在環境變數中設定密碼：PGPASSWORD=xxx。</li>
</ul>
</li>
</ul>
<ol>
<li>進入 psql 工具中，就可以開始輸入欲查詢的 SQL：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ psql -h 127.0.0.1 -U postgres -d mydb -p <span style="color:#ae81ff">5432</span>
</span></span><span style="display:flex;"><span>或
</span></span><span style="display:flex;"><span>$ psql -h 127.0.0.1 -U postgres -d mydb
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 進入之後，設定預設尋找的 schema 為 stage：</span>
</span></span><span style="display:flex;"><span>  set search_path <span style="color:#f92672">=</span> stage;
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 顯示目前預設的 schema：</span>
</span></span><span style="display:flex;"><span>  show search_path;
</span></span></code></pre></div><ol start="2">
<li>直接在 shell 中利用 psql 工具匯出資料：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ psql -h 127.0.0.1 -U postgres -d mydb -c <span style="color:#e6db74">&#34;select * from stage.sbd_bamt001_stage&#34;</span>
</span></span><span style="display:flex;"><span>$ psql.exe -h 127.0.0.1 -U postgres -d mydb -c <span style="color:#e6db74">&#34;select * from stage.sbd_bamt001_stage&#34;</span> &gt; file
</span></span></code></pre></div><ol start="3">
<li>尋找表格第 2 欄的內容：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ psql.exe -h 127.0.0.1 -U postgres -d mydb -c <span style="color:#e6db74">&#34;select * from stage.sbd_bamt001_stage&#34;</span> | head -16 | tail -14 | cut -d <span style="color:#e6db74">&#39;|&#39;</span> -f <span style="color:#ae81ff">2</span>
</span></span></code></pre></div><ol start="4">
<li>尋找表格第 2 欄的內容，並去除前後空白：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ psql.exe -h 127.0.0.1 -U postgres -d mydb -c <span style="color:#e6db74">&#34;select * from stage.sbd_bamt001_stage&#34;</span> | head -16 | tail -14 | cut -d <span style="color:#e6db74">&#39;|&#39;</span> -f <span style="color:#ae81ff">2</span> | tr -d <span style="color:#e6db74">&#39; &#39;</span>
</span></span><span style="display:flex;"><span>$ psql.exe -h 127.0.0.1 -U postgres -d mydb -c <span style="color:#e6db74">&#34;select * from stage.sbd_bamt001_stage&#34;</span> | head -16 | tail -14 | cut -d <span style="color:#e6db74">&#39;|&#39;</span> -f <span style="color:#ae81ff">2</span> | sed <span style="color:#e6db74">&#39;s/^ *//g&#39;</span> | sed <span style="color:#e6db74">&#39;s/ *$//g&#39;</span>
</span></span></code></pre></div><ol start="5">
<li>尋找表格第 2 欄名稱：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ psql.exe -h 127.0.0.1 -U postgres -d mydb -c <span style="color:#e6db74">&#34;select * from stage.sbd_bamt001_stage&#34;</span> | head -1 | cut -d <span style="color:#e6db74">&#39;|&#39;</span> -f <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>$ psql.exe -h 127.0.0.1 -U postgres -d mydb -c <span style="color:#e6db74">&#34;select * from stage.sbd_bamt001_stage&#34;</span> | head -1 | awk -F <span style="color:#e6db74">&#39;|&#39;</span> <span style="color:#e6db74">&#39;{print $2}&#39;</span>
</span></span></code></pre></div><ol start="6">
<li>尋找表格有幾欄：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ psql.exe -h 127.0.0.1 -U postgres -d mydb -c <span style="color:#e6db74">&#34;select * from stage.sbd_bamt001_stage&#34;</span> | head -1 | awk -F <span style="color:#e6db74">&#39;|&#39;</span> <span style="color:#e6db74">&#39;{print NF}&#39;</span>
</span></span></code></pre></div><ol start="7">
<li>控制輸出格式 (不輸出表頭，且以逗號分隔)：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ psql.exe -h 127.0.0.1 -U postgres -d mydb -t -A -F , -c <span style="color:#e6db74">&#34;select * from stage.sbd_bamt001_stage&#34;</span>
</span></span></code></pre></div><ol start="8">
<li>控制輸出格式，並尋找表格第 2 欄的內容：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ psql.exe -h 127.0.0.1 -U postgres -d mydb -t -A -F , -c <span style="color:#e6db74">&#34;select * from stage.sbd_bamt001_stage&#34;</span> | cut -d , -f <span style="color:#ae81ff">2</span>
</span></span></code></pre></div><ol start="9">
<li>控制輸出格式，並找表格第 2 欄名稱：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ psql.exe -h 127.0.0.1 -U postgres -d mydb -A -F , -c <span style="color:#e6db74">&#34;select * from stage.sbd_bamt001_stage&#34;</span> | head -1 | cut -d , -f <span style="color:#ae81ff">2</span>
</span></span></code></pre></div><ol start="10">
<li>控制輸出格式，並尋找表格有幾欄：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ psql.exe -h 127.0.0.1 -U postgres -d mydb -A -F , -c <span style="color:#e6db74">&#34;select * from stage.sbd_bamt001_stage&#34;</span> | head -1 | awk -F <span style="color:#e6db74">&#39;,&#39;</span> <span style="color:#e6db74">&#39;{print NF}&#39;</span>
</span></span></code></pre></div><ol start="11">
<li>尋找特定證號格式的資料：
在本專案中，對於證號的格式有一定的規範，例如：</li>
</ol>
<table>
<thead>
<tr>
<th>類型</th>
<th>定義</th>
<th>where clause in PostgreSQL</th>
<th>grep in Linux</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>長度為10，第1碼為大小寫英文字母，第2碼為1,2，第3~10碼為數字 (例如：個人身分證號)</td>
<td><code>~ '^[a-zA-Z][12][0-9]{8}$'</code></td>
<td><code>grep '^[a-zA-Z][12][0-9]\{8\}$'</code></td>
</tr>
<tr>
<td>2</td>
<td>長度為10，第1 ~ 10碼皆為數字 (例如：大陸人士證號)</td>
<td><code>~ '^[0-9]{10}$'</code></td>
<td><code>grep '^[0-9]\{10\}$'</code></td>
</tr>
<tr>
<td>3</td>
<td>長度為7，第1 ~ 7碼皆為數字 (例如：大陸人士證號)</td>
<td><code>~ '^[0-9]{7}$'</code></td>
<td><code>grep '^[0-9]\{7\}$'</code></td>
</tr>
<tr>
<td>4</td>
<td>長度為10，第1碼為大小寫英文字母，第2碼為A,B,C,D，第3 ~ 10碼為數字 (例如：新版外僑證號)</td>
<td><code>~ '^[a-zA-Z][ABCD][0-9]{8}$'</code></td>
<td><code>grep '^[a-zA-Z][ABCD][0-9]\{8\}$'</code></td>
</tr>
<tr>
<td>5</td>
<td>長度為10，第1 ~ 8碼為數字，第9 ~ 10碼為大小寫英文字母 (例如：舊版外僑證號)</td>
<td><code>~ '^[0-9]{8}[a-zA-Z]{2}$'</code></td>
<td><code>grep '^[0-9]\{8\}[a-zA-Z]\{2\}$'</code></td>
</tr>
<tr>
<td>6</td>
<td>長度為10，第1碼為大小寫英文字母，第2碼為8,9，第3 ~ 10碼為數字</td>
<td><code>~ '^[a-zA-Z][89][0-9]{8}$'</code></td>
<td><code>grep '^[a-zA-Z][89][0-9]\{8\}$'</code></td>
</tr>
<tr>
<td>7</td>
<td>長度為8，第1 ~ 8碼皆為數字 (例如：公司營利事業登記證)</td>
<td><code>~ '^[0-9]{8}$'</code></td>
<td><code>grep '^[0-9]\{8\}$'</code></td>
</tr>
</tbody>
</table>
<ul>
<li>下面以類型 1 為例，尋找 stage.sbd_bamt001_stage 表格的 resp_idn 欄位 (第 21 欄) 中，格式符合「長度為10，第1碼為大小寫英文字母，第2碼為1,2，第3~10碼為數字」的資料：</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># 在 SQL 中利用 where 條件來尋找</span>
</span></span><span style="display:flex;"><span>$ psql.exe -h 127.0.0.1 -U postgres -d mydb -t -A -F , -c <span style="color:#e6db74">&#34;select resp_idn from stage.sbd_bamt001_stage where resp_idn ~ &#39;^[a-zA-Z][12][0-9]{8}</span>$<span style="color:#e6db74">&#39;&#34;</span>
</span></span><span style="display:flex;"><span>A123456789
</span></span><span style="display:flex;"><span>B246813579
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 在 Linux shell 中利用 grep 指令來尋找 (如果資料來源為檔案，也可以用這個方法)</span>
</span></span><span style="display:flex;"><span>$ psql.exe -h 127.0.0.1 -U postgres -d mydb -t -A -F , -c <span style="color:#e6db74">&#34;select * from stage.sbd_bamt001_stage&#34;</span> | cut -d , -f <span style="color:#ae81ff">21</span> | grep <span style="color:#e6db74">&#39;^[a-zA-Z][12][0-9]\{8\}$&#39;</span>
</span></span><span style="display:flex;"><span>A123456789
</span></span><span style="display:flex;"><span>B246813579
</span></span></code></pre></div><ol start="12">
<li>利用 pg_dump 匯出 stage.sbd_bamt001_stage 的 DDL (不含資料)：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ pg_dump -U postgres -d mydb -x -s -t stage.sbd_bamt001_stage
</span></span></code></pre></div><table>
<thead>
<tr>
<th>練習5</th>
</tr>
</thead>
<tbody>
<tr>
<td>請利用 psql + Linux shell 練習下面的題目：<br>在 stage.sbd_bamt001_stage 中，<br>1. 第 60 欄的欄位名稱為何？<br>2. 印出第 64 欄的欄位名稱、所有內容。<br>3. 請篩選出 resp_idn 欄位 (第 21 欄) 中，格式符合類型 2 的資料內容。<br>4. 請篩選出 resp_idn 欄位 (第 21 欄) 中，格式符合類型 3 的資料內容。<br>5. 請篩選出 resp_idn 欄位 (第 21 欄) 中，格式符合類型 4 的資料內容。<br>6. 請篩選出 resp_idn 欄位 (第 21 欄) 中，格式符合類型 5 的資料內容。<br>7. 請篩選出 resp_idn 欄位 (第 21 欄) 中，格式符合類型 6 的資料內容。<br>8. 請篩選出 resp_idn 欄位 (第 21 欄) 中，格式符合類型 7 的資料內容。<br>9. 利用 pg_dump 匯出 stage.sbd_bamt001_stage 的 DDL 與資料。</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="九其他主題與工具" >九、其他主題與工具
<span>
    <a href="#%e4%b9%9d%e5%85%b6%e4%bb%96%e4%b8%bb%e9%a1%8c%e8%88%87%e5%b7%a5%e5%85%b7">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><ul>
<li>find
<ul>
<li>用來搜尋符合特定條件的檔案。</li>
<li>語法：find [PATH] [option] [action]</li>
<li>參考網址：http://linux.vbird.org/linux_basic/0220filemanager.php#find</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># 範例：尋找當前目錄下(含子目錄)的所有 txt 檔</span>
</span></span><span style="display:flex;"><span>$ find . -name <span style="color:#e6db74">&#39;*.txt&#39;</span>
</span></span><span style="display:flex;"><span>./a.txt
</span></span><span style="display:flex;"><span>./b.txt
</span></span><span style="display:flex;"><span>./dir/c.txt
</span></span><span style="display:flex;"><span>./dir/d.txt
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 範例：尋找當前目錄下(含子目錄)的所有 txt 檔，找到之後使用 ls -al 指令查詢</span>
</span></span><span style="display:flex;"><span>$ find . -name <span style="color:#e6db74">&#39;*.txt&#39;</span> -exec ls -al <span style="color:#f92672">{}</span> <span style="color:#ae81ff">\;</span>
</span></span><span style="display:flex;"><span>-rw-r--r-- <span style="color:#ae81ff">1</span> cfchen <span style="color:#ae81ff">197121</span> <span style="color:#ae81ff">0</span> Jan  <span style="color:#ae81ff">3</span> 00:42 ./a.txt
</span></span><span style="display:flex;"><span>-rw-r--r-- <span style="color:#ae81ff">1</span> cfchen <span style="color:#ae81ff">197121</span> <span style="color:#ae81ff">0</span> Jan  <span style="color:#ae81ff">3</span> 00:42 ./b.txt
</span></span><span style="display:flex;"><span>-rw-r--r-- <span style="color:#ae81ff">1</span> cfchen <span style="color:#ae81ff">197121</span> <span style="color:#ae81ff">0</span> Jan  <span style="color:#ae81ff">3</span> 00:43 ./dir/c.txt
</span></span><span style="display:flex;"><span>-rw-r--r-- <span style="color:#ae81ff">1</span> cfchen <span style="color:#ae81ff">197121</span> <span style="color:#ae81ff">0</span> Jan  <span style="color:#ae81ff">3</span> 00:43 ./dir/d.txt
</span></span></code></pre></div><ul>
<li>
<p>ssh</p>
<ul>
<li>用來登入遠端主機進行操作；或者是不登入，直接發送指令過去遠端主機。</li>
<li>參考網址：http://linux.vbird.org/linux_server/0310telnetssh.php#ssh</li>
<li>範例1：請遠端主機刪除某檔案
<code>ssh account@IP_address &quot;rm -rf /path/file&quot;</code></li>
<li>範例2：呼叫遠端主機的某支 shell script
<code>ssh account@IP_address &quot;/path/cmd.sh&quot;</code></li>
</ul>
</li>
<li>
<p>sftp</p>
<ul>
<li>從遠端伺服器下載或上傳檔案</li>
<li>參考網址：http://linux.vbird.org/linux_server/0310telnetssh.php#sftp</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># 範例1：手動連線</span>
</span></span><span style="display:flex;"><span>$ sftp cfchen@localhost
</span></span><span style="display:flex;"><span>cfchen@localhost<span style="color:#960050;background-color:#1e0010">&#39;</span>s password:
</span></span><span style="display:flex;"><span>Connected to localhost.
</span></span><span style="display:flex;"><span>sftp&gt; pwd
</span></span><span style="display:flex;"><span>Remote working directory: /c/Users/cfchen
</span></span><span style="display:flex;"><span>sftp&gt; lpwd
</span></span><span style="display:flex;"><span>Local working directory: /c/Users/cfchen
</span></span><span style="display:flex;"><span>sftp&gt; cd /c/Users/cfchen/sftp/from
</span></span><span style="display:flex;"><span>sftp&gt; lcd /c/Users/cfchen/sftp/to
</span></span><span style="display:flex;"><span>sftp&gt; pwd
</span></span><span style="display:flex;"><span>Remote working directory: /c/Users/cfchen/sftp/from
</span></span><span style="display:flex;"><span>sftp&gt; lpwd
</span></span><span style="display:flex;"><span>Local working directory: /c/Users/cfchen/sftp/to
</span></span><span style="display:flex;"><span>sftp&gt; ls
</span></span><span style="display:flex;"><span>a.txt  b.txt  dir
</span></span><span style="display:flex;"><span>sftp&gt; get -r *
</span></span><span style="display:flex;"><span>Fetching /c/Users/cfchen/sftp/from/a.txt to a.txt
</span></span><span style="display:flex;"><span>Fetching /c/Users/cfchen/sftp/from/b.txt to b.txt
</span></span><span style="display:flex;"><span>Fetching /c/Users/cfchen/sftp/from/dir/ to dir
</span></span><span style="display:flex;"><span>Retrieving /c/Users/cfchen/sftp/from/dir
</span></span><span style="display:flex;"><span>sftp&gt; lls
</span></span><span style="display:flex;"><span>a.txt  b.txt  dir
</span></span><span style="display:flex;"><span>sftp&gt; bye
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 範例2：寫成 shell script (可直接於終端機畫面輸入，或寫成 shell script 檔案再執行皆可)</span>
</span></span><span style="display:flex;"><span>sftp cfchen@localhost <span style="color:#e6db74">&lt;&lt;END! 1&gt;&gt;sftp.log 2&gt;&gt;sftp.log
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">pwd
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">lpwd
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">cd /c/Users/cfchen/sftp/from
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">lcd /c/Users/cfchen/sftp/to
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">pwd
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">lpwd
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ls
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">get -r *
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">lls
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">bye
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">END</span>!
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 範例3：寫成設定檔 (config file) 再執行 (但本方法僅能在使用金鑰連線的SFTP模式下才能使用)</span>
</span></span><span style="display:flex;"><span>$ cat sftp.conf
</span></span><span style="display:flex;"><span>pwd
</span></span><span style="display:flex;"><span>lpwd
</span></span><span style="display:flex;"><span>cd /c/Users/cfchen/sftp/from
</span></span><span style="display:flex;"><span>lcd /c/Users/cfchen/sftp/to
</span></span><span style="display:flex;"><span>pwd
</span></span><span style="display:flex;"><span>lpwd
</span></span><span style="display:flex;"><span>ls
</span></span><span style="display:flex;"><span>get -r *
</span></span><span style="display:flex;"><span>lls
</span></span><span style="display:flex;"><span>bye
</span></span><span style="display:flex;"><span>$ sftp -b sftp.conf cfchen@localhost 1&gt;&gt;sftp.log 2&gt;&gt;sftp.log
</span></span></code></pre></div><ul>
<li>date
<ul>
<li>顯示或計算日期/時間</li>
<li>語法：date [OPTION]&hellip; [+FORMAT]</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># 顯示目前日期 (西元格式 YYYYMMDD)</span>
</span></span><span style="display:flex;"><span>$ date <span style="color:#e6db74">&#39;+%Y%m%d&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">20211227</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 顯示目前日期 (西元格式 YYYY/MM/DD)</span>
</span></span><span style="display:flex;"><span>$ date <span style="color:#e6db74">&#39;+%Y/%m/%d&#39;</span>
</span></span><span style="display:flex;"><span>2021/12/27
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 顯示目前日期時間 (西元格式 YYYYMMDD hhmmss)</span>
</span></span><span style="display:flex;"><span>$ date <span style="color:#e6db74">&#39;+%Y%m%d %H%M%S&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">20211227</span> <span style="color:#ae81ff">141112</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 顯示目前日期時間 (西元格式 YYYY/MM/DD hh:mm:ss)</span>
</span></span><span style="display:flex;"><span>$ date <span style="color:#e6db74">&#39;+%Y/%m/%d %H:%M:%S&#39;</span>
</span></span><span style="display:flex;"><span>2021/12/27 14:12:46
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 顯示目前日期的 1 日之前 (西元格式 YYYYMMDD)</span>
</span></span><span style="display:flex;"><span>$ date -d <span style="color:#e6db74">&#39;-1 days&#39;</span> <span style="color:#e6db74">&#39;+%Y%m%d&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">20211226</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 顯示目前日期的 2 日之後 (西元格式 YYYYMMDD)</span>
</span></span><span style="display:flex;"><span>$ date -d <span style="color:#e6db74">&#39;+2 days&#39;</span> <span style="color:#e6db74">&#39;+%Y%m%d&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">20211229</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 顯示目前日期的 1 月之前 (西元格式 YYYYMMDD)</span>
</span></span><span style="display:flex;"><span>$ date -d <span style="color:#e6db74">&#39;-1 months&#39;</span> <span style="color:#e6db74">&#39;+%Y%m%d&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">20211127</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 顯示目前日期的 1 年之前 (西元格式 YYYYMMDD)</span>
</span></span><span style="display:flex;"><span>$ date -d <span style="color:#e6db74">&#39;-1 years&#39;</span> <span style="color:#e6db74">&#39;+%Y%m%d&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">20201227</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 顯示 2021/01/01 的 10 天之前 (西元格式 YYYYMMDD)</span>
</span></span><span style="display:flex;"><span>$ date -d <span style="color:#e6db74">&#34;20210101 -10 days&#34;</span> <span style="color:#e6db74">&#39;+%Y%m%d&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">20201222</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 顯示上個月月底 (西元格式 YYYYMMDD)</span>
</span></span><span style="display:flex;"><span>$ date -d <span style="color:#e6db74">&#34;`date &#39;+%Y%m01&#39;`-1 days&#34;</span> <span style="color:#e6db74">&#39;+%Y%m%d&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">20211130</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 顯示本月月底 (西元格式 YYYYMMDD)</span>
</span></span><span style="display:flex;"><span>$ date -d <span style="color:#e6db74">&#34;`date &#39;+%Y%m01&#39;`+1 months -1 days&#34;</span> <span style="color:#e6db74">&#39;+%Y%m%d&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">20211231</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 顯示目前民國日期 (民國格式 YYYMMDD)</span>
</span></span><span style="display:flex;"><span>$ expr <span style="color:#e6db74">`</span>date <span style="color:#e6db74">&#39;+%Y%m%d&#39;</span><span style="color:#e6db74">`</span> - <span style="color:#ae81ff">19110000</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1101227</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 顯示目前日期的 1 日之前 (民國格式 YYYMMDD)</span>
</span></span><span style="display:flex;"><span>$ expr <span style="color:#e6db74">`</span>date -d <span style="color:#e6db74">&#39;-1 days&#39;</span> <span style="color:#e6db74">&#39;+%Y%m%d&#39;</span><span style="color:#e6db74">`</span> - <span style="color:#ae81ff">19110000</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1101226</span>
</span></span></code></pre></div><ul>
<li>time
<ul>
<li>當執行程式時，只要在指令前加上 time，就能計算該程式的執行時間。</li>
<li>real: 從開始到結束的總時間</li>
<li>user: CPU所花費的運算總時間</li>
<li>sys: CPU所花費的在系統(kernel)相關的時間 比如說配置記憶體</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ time sleep <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>real    0m3.116s
</span></span><span style="display:flex;"><span>user    0m0.000s
</span></span><span style="display:flex;"><span>sys     0m0.061s
</span></span></code></pre></div><ul>
<li>iconv
<ul>
<li>功能：編碼轉換。</li>
<li>語法1：iconv [OPTION&hellip;] [-f ENCODING] [-t ENCODING] [INPUTFILE&hellip;]</li>
<li>語法2：iconv -l</li>
<li>選項與參數：
<ul>
<li>-l ：list the supported encodings</li>
<li>-f ：the encoding of the input</li>
<li>-t ：the encoding of the output</li>
<li>-c ：discard unconvertible characters</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># BIG-5 轉 UTF-8</span>
</span></span><span style="display:flex;"><span>$ iconv -f BIG-5 -t UTF-8 big5.txt &gt; utf8.txt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># UTF-8 轉 BIG-5</span>
</span></span><span style="display:flex;"><span>$ iconv -f UTF-8 -t BIG-5 utf8.txt &gt; big5.txt
</span></span></code></pre></div><table>
<thead>
<tr>
<th>練習6</th>
</tr>
</thead>
<tbody>
<tr>
<td>1. 利用 iconv 工具，將練習1的檔案 (8355.csv) 編碼由 UTF-8 改為 BIG-5，再由 BIG-5 改回 UTF-8。 (下載連結：https://data.gov.tw/dataset/8355 )<br>2. 切換一下視窗的編碼設定，確認兩種檔案是否都能順利顯示於螢幕。</td>
</tr>
</tbody>
</table>
<ul>
<li>nohup
<ul>
<li>當執行程式時，只要在指令前加上 nohup，就可以讓程式避免因連線中斷而停止。</li>
<li>使用時通常會將該程式設定於背景執行 (在指令的最後面加上「&amp;」)</li>
<li>因為 nohup 在運作時，可能不會輸出結果到螢幕 (因為程式於背景執行)，所以會需要一個檔案來承接程式的輸出訊息，如果我們沒有指定這個檔案的話，nohup 會預設將訊息寫到 nohup.out 檔案裡去。</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ nohup ls -al &amp;    <span style="color:#75715e"># 輸出檔預設為 nohup.out</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>1<span style="color:#f92672">]</span> <span style="color:#ae81ff">104</span>
</span></span><span style="display:flex;"><span>nohup: ignoring input and appending output to <span style="color:#e6db74">&#39;nohup.out&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ nohup ls -al &gt; result &amp;    <span style="color:#75715e"># 輸出檔為 result</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>1<span style="color:#f92672">]</span> <span style="color:#ae81ff">20656</span>
</span></span><span style="display:flex;"><span>nohup: ignoring input and redirecting stderr to stdout
</span></span></code></pre></div><ul>
<li>ps
<ul>
<li>顯示目前的程序 (process)。</li>
<li>選項與參數：
<ul>
<li>-e ：所有的 process 均顯示出來。</li>
<li>-u ：顯示該使用者相關的 process。</li>
<li>-f ：更完整的輸出。</li>
</ul>
</li>
<li>參考網址：http://linux.vbird.org/linux_basic/0440processcontrol.php#ps</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># 顯示目前所有 process</span>
</span></span><span style="display:flex;"><span>$ ps -ef
</span></span><span style="display:flex;"><span>     UID     PID    PPID  TTY        STIME COMMAND
</span></span><span style="display:flex;"><span>  cfchen   <span style="color:#ae81ff">19876</span>   <span style="color:#ae81ff">16984</span> pty0     17:36:32 /usr/bin/ps
</span></span><span style="display:flex;"><span>  cfchen   <span style="color:#ae81ff">16984</span>   <span style="color:#ae81ff">14552</span> pty0     11:47:48 /usr/bin/bash
</span></span><span style="display:flex;"><span>  cfchen   <span style="color:#ae81ff">14552</span>       <span style="color:#ae81ff">1</span> ?        11:47:47 /usr/bin/mintty
</span></span></code></pre></div><ul>
<li>kill
<ul>
<li>刪除程序 (process)</li>
<li>選項與參數：
<ul>
<li>-9 ：強制刪除 process。</li>
</ul>
</li>
<li>參考網址：http://linux.vbird.org/linux_basic/0440processcontrol.php#killjobs</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># 範例：開啟兩個 git bash 視窗</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 先在第 1 個視窗輸入：</span>
</span></span><span style="display:flex;"><span>$ sleep <span style="color:#ae81ff">100</span>  <span style="color:#75715e">#暫停 100 秒</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 然後在第 2 個視窗輸入：</span>
</span></span><span style="display:flex;"><span>$ ps -ef  <span style="color:#75715e"># 查詢得知上述 sleep 指令所代表的 PID 為 17960</span>
</span></span><span style="display:flex;"><span>     UID     PID    PPID  TTY        STIME COMMAND
</span></span><span style="display:flex;"><span>  cfchen   <span style="color:#ae81ff">17960</span>   <span style="color:#ae81ff">16984</span> pty0     17:39:31 /usr/bin/sleep
</span></span><span style="display:flex;"><span>  cfchen   <span style="color:#ae81ff">16984</span>   <span style="color:#ae81ff">14552</span> pty0     11:47:48 /usr/bin/bash
</span></span><span style="display:flex;"><span>  cfchen   <span style="color:#ae81ff">17560</span>   <span style="color:#ae81ff">19208</span> pty1     17:37:47 /usr/bin/bash
</span></span><span style="display:flex;"><span>  cfchen   <span style="color:#ae81ff">19208</span>       <span style="color:#ae81ff">1</span> ?        17:37:47 /usr/bin/mintty
</span></span><span style="display:flex;"><span>  cfchen    <span style="color:#ae81ff">1524</span>   <span style="color:#ae81ff">17560</span> pty1     17:39:59 /usr/bin/ps
</span></span><span style="display:flex;"><span>  cfchen   <span style="color:#ae81ff">14552</span>       <span style="color:#ae81ff">1</span> ?        11:47:47 /usr/bin/mintty
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>$ kill <span style="color:#ae81ff">17960</span>  <span style="color:#75715e"># 接著刪除 sleep 指令的 process</span>
</span></span></code></pre></div><ul>
<li>單引號 (<code>'</code>)、雙引號 (<code>&quot;</code>)的差異</li>
</ul>
<table>
<thead>
<tr>
<th>字元</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>單引號<br>(Single quote)</td>
<td>所有夾在單引號之間的字元都會失去它們的特殊涵義</td>
</tr>
<tr>
<td>雙引號<br>(Double quote)</td>
<td>大部分夾在單引號之間的字元會失去它們原先的特殊涵義，除了下列類型以外：<br>(1). <code>$</code> 符號 (作為變數替換)<br>(2). 作為指令替換的反引號(<code>`</code>)<br>(3). <code>\$</code> (代表 <code>$</code> 本身)<br>(4). <code>\`</code> (代表 <code>`</code> 本身)(反引號)<br>(5). <code>\&quot;</code> (代表 <code>&quot;</code> 本身)(雙引號)<br>(6). <code>\\</code> (代表 <code>\</code> 本身)</td>
</tr>
<tr>
<td>倒斜線<br>(Backslash)</td>
<td>任何接在倒斜線之後的字元，會失去該字元原先的特殊涵義</td>
</tr>
</tbody>
</table>
<ul>
<li>反引號 (<code>`</code>)
<ul>
<li>用來做指令代換。</li>
<li>可以容易地使用指令輸出，指定給 shell script 的變數。</li>
<li>語法：<code>`cmd`</code></li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># 範例1：產生一個檔名具有目前日期的檔案</span>
</span></span><span style="display:flex;"><span>$ DATE<span style="color:#f92672">=</span><span style="color:#e6db74">`</span>date <span style="color:#e6db74">&#39;+%Y%m%d&#39;</span><span style="color:#e6db74">`</span>
</span></span><span style="display:flex;"><span>$ touch filename.<span style="color:#e6db74">${</span>DATE<span style="color:#e6db74">}</span>.txt
</span></span><span style="display:flex;"><span>$ ls -al filename*
</span></span><span style="display:flex;"><span>-rw-r--r-- <span style="color:#ae81ff">1</span> cfchen <span style="color:#ae81ff">197121</span> <span style="color:#ae81ff">0</span> Dec <span style="color:#ae81ff">27</span> 20:01 filename.20211227.txt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 範例2：產生一個檔名具有筆數的檔案</span>
</span></span><span style="display:flex;"><span>$ COUNT<span style="color:#f92672">=</span><span style="color:#e6db74">`</span>psql.exe -h 127.0.0.1 -U postgres -d mydb -t -A -F , -c <span style="color:#e6db74">&#34;select count(*) from stage.sbd_bamt001_stage&#34;</span><span style="color:#e6db74">`</span>
</span></span><span style="display:flex;"><span>$ psql.exe -h 127.0.0.1 -U postgres -d mydb -t -A -F , -c <span style="color:#e6db74">&#34;select * from stage.sbd_bamt001_stage&#34;</span> &gt; sbd_bamt001_stage_<span style="color:#e6db74">${</span>COUNT<span style="color:#e6db74">}</span>.txt
</span></span><span style="display:flex;"><span>$ ls -al sbd_bamt001_stage_*
</span></span><span style="display:flex;"><span>-rw-r--r-- <span style="color:#ae81ff">1</span> cfchen <span style="color:#ae81ff">197121</span> <span style="color:#ae81ff">10730</span> Jan  <span style="color:#ae81ff">3</span> 11:47 sbd_bamt001_stage_14.txt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 小觀念：設定變數時，變數前面不用加 $，讀取時才要加 $ (讀取時有沒有加 {} 都可以)</span>
</span></span><span style="display:flex;"><span>$ MY_VAR<span style="color:#f92672">=</span><span style="color:#ae81ff">12345</span>
</span></span><span style="display:flex;"><span>$ echo <span style="color:#e6db74">${</span>MY_VAR<span style="color:#e6db74">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">12345</span>
</span></span><span style="display:flex;"><span>$ echo $MY_VAR
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">12345</span>
</span></span></code></pre></div><table>
<thead>
<tr>
<th>練習7</th>
</tr>
</thead>
<tbody>
<tr>
<td>一、請先至網址下載資料：https://data.gov.tw/dataset/120711 <br>(下載 csv 檔，並另存檔名為「cov19.csv」)。 <br>二、利用 shell 指令解決下列問題：<br>(1).請問這個檔案總共有幾列資料？(包含表頭與內容)<br>(2).請取出檔案中，屬於境外移入的資料列 (若為境外移入時，「縣市」與「鄉鎮」必為空值，「是否為境外移入」必為是)。<br>(3).請取出檔案中，縣市鄉鎮欄位為新北市永和區的資料列。<br>(4).請問至今有多少個縣市鄉鎮曾經有出現確定病例數？ (請先排除表頭與境外移入)<br>(5).請問至今為止的累計確定病例數。<br>※ 提示：利用 awk 指令協助數字的累計。<br>※ 語法：<code>awk -F ',' '{sum+=$8;} END{print sum;}'</code><br>(6).請問至今為止，境外移入的累計確定病例數。<br>(7).請問至今為止，本土的累計確定病例數 (本土 = 非境外移入)。<br>(8).請問2021年5月期間，新北市永和區的累計確定病例數。<br>(9).請依照各縣市鄉鎮為單位，計算其累計確定病例數，並由高至低降冪排序。<br>※提示：利用 awk 指令做群組的累計。<br>※語法：<code>awk -F ',' '{sum[$3&quot; &quot;$4]+=$8} END{for(key in sum) print key, sum[key];}'</code><br></td>
</tr>
</tbody>
</table>
<hr>
<h2 id="作業四" >作業四
<span>
    <a href="#%e4%bd%9c%e6%a5%ad%e5%9b%9b">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><ul>
<li>請自行建立 Linux主機練習：
<img src="https://i.imgur.com/IOtUdh5.png" alt=""></li>
<li>shell script 參考範例：https://drive.google.com/file/d/1a4zxSYe_9QsVK2hBv5FEF07TvD5Eit8R/view?usp=sharing</li>
</ul>
<hr>
<h2 id="練習解答" >練習解答
<span>
    <a href="#%e7%b7%b4%e7%bf%92%e8%a7%a3%e7%ad%94">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><ul>
<li>
<p>練習1(解答)：
<code>wc -l 8355.csv</code>
<code>grep ^2019 8355.csv | grep -v &quot;合  計&quot;</code></p>
</li>
<li>
<p>練習2(解答)：
<code>grep ^2019 8355.csv | grep -v &quot;合  計&quot; | cut -d, -f2 | cut -d'(' -f2 | cut -d')' -f1</code>
<code>grep ^2019 8355.csv | grep -o &quot;(.*)&quot; | grep -v Total  #但會包含括號</code>
<code>grep ^2019 8355.csv | grep -o &quot;(.*)&quot; | grep -v Total | tr -d '(' | tr -d ')'</code></p>
</li>
<li>
<p>練習3(解答)：
<code>grep ^2010 8355.csv | grep -v &quot;合  計&quot; | cut -d , -f 2 &gt; 2010.txt</code>
<code>grep ^2011 8355.csv | grep -v &quot;合  計&quot; | cut -d , -f 2 &gt; 2011.txt</code>
<code>sort 2010.txt 2011.txt | uniq -d &gt; dup  #共同</code>
<code>cat 2010.txt dup | sort | uniq -u  #only 2010</code>
<code>cat 2011.txt dup | sort | uniq -u  #only 2011</code></p>
</li>
<li>
<p>練習4(解答)：
<code>cut -d ' ' -f 1 .bash_history_new | sort | uniq -c | sort -n -k1,2 -r | head -10</code>
說明：1.找出第一欄(指令名稱) 2.排序 3.計算次數 4.依據次數+指令名稱再重新排序 5.取出前面10筆)</p>
</li>
<li>
<p>練習5(解答)：</p>
</li>
</ul>
<ol>
<li>第 60 欄的欄位名稱為何？
<code>psql.exe -h 127.0.0.1 -U postgres -d mydb -A -F , -c &quot;select * from stage.sbd_bamt001_stage&quot; | head -1 | cut -d , -f 60</code></li>
<li>印出第 64 欄的欄位名稱、所有內容。
<code>psql.exe -h 127.0.0.1 -U postgres -d mydb -A -F , -c &quot;select * from stage.sbd_bamt001_stage&quot; | cut -d , -f 64</code></li>
<li>請篩選出 resp_idn 欄位 (第 21 欄) 中，格式符合類型 2 的資料內容。
<code>psql.exe -h 127.0.0.1 -U postgres -d mydb -t -A -F , -c &quot;select * from stage.sbd_bamt001_stage&quot; | cut -d , -f 21 | grep '^[0-9]\{10\}$'</code></li>
<li>請篩選出 resp_idn 欄位 (第 21 欄) 中，格式符合類型 3 的資料內容。
<code>psql.exe -h 127.0.0.1 -U postgres -d mydb -t -A -F , -c &quot;select * from stage.sbd_bamt001_stage&quot; | cut -d , -f 21 | grep '^[0-9]\{7\}$'</code></li>
<li>請篩選出 resp_idn 欄位 (第 21 欄) 中，格式符合類型 4 的資料內容。
<code>psql.exe -h 127.0.0.1 -U postgres -d mydb -t -A -F , -c &quot;select * from stage.sbd_bamt001_stage&quot; | cut -d , -f 21 | grep '^[a-zA-Z][ABCD][0-9]\{8\}$'</code></li>
<li>請篩選出 resp_idn 欄位 (第 21 欄) 中，格式符合類型 5 的資料內容。
<code>psql.exe -h 127.0.0.1 -U postgres -d mydb -t -A -F , -c &quot;select * from stage.sbd_bamt001_stage&quot; | cut -d , -f 21 | grep '^[0-9]\{8\}[a-zA-Z]\{2\}$'</code></li>
<li>請篩選出 resp_idn 欄位 (第 21 欄) 中，格式符合類型 6 的資料內容。
<code>psql.exe -h 127.0.0.1 -U postgres -d mydb -t -A -F , -c &quot;select * from stage.sbd_bamt001_stage&quot; | cut -d , -f 21 | grep '^[a-zA-Z][89][0-9]\{8\}$'</code></li>
<li>請篩選出 resp_idn 欄位 (第 21 欄) 中，格式符合類型 7 的資料內容。
<code>psql.exe -h 127.0.0.1 -U postgres -d mydb -t -A -F , -c &quot;select * from stage.sbd_bamt001_stage&quot; | cut -d , -f 21 | grep '^[0-9]\{8\}$'</code></li>
<li>利用 pg_dump 匯出 stage.sbd_bamt001_stage 的 DDL 與資料。
<code>pg_dump -U postgres -d mydb -x -t stage.sbd_bamt001_stage  # 不要寫 -s</code></li>
</ol>
<ul>
<li>
<p>練習6(解答)：
<code>iconv -c -f UTF-8 -t BIG-5 8355.csv &gt; 8355_big5.csv</code>
<code>iconv -c -f BIG-5 -t UTF-8 8355_big5.csv &gt; 8355_utf8.csv</code></p>
</li>
<li>
<p>練習7(解答)：</p>
</li>
</ul>
<ol>
<li>請問這個檔案總共有幾列資料？</li>
</ol>
<ul>
<li><code>wc -l cov19.csv</code></li>
</ul>
<ol start="2">
<li>請取出檔案中，屬於境外移入的資料列。</li>
</ol>
<ul>
<li><code>grep &quot;空值&quot; cov19.csv &gt; 境外移入.txt</code></li>
<li><code>awk -F ',' '{if($6==&quot;是&quot;) print $0}' cov19.csv &gt; 境外移入.txt</code></li>
</ul>
<ol start="3">
<li>請取出檔案中，縣市鄉鎮欄位為新北市永和區的資料列。</li>
</ol>
<ul>
<li><code>grep &quot;新北市,永和區&quot; cov19.csv &gt; 新北市永和區.txt</code></li>
<li><code>awk -F ',' '{if($3==&quot;新北市&quot; &amp;&amp; $4==&quot;永和區&quot;) print $0}' cov19.csv &gt; 新北市永和區.txt</code></li>
</ul>
<ol start="4">
<li>請問至今有多少個縣市鄉鎮曾經有出現確定病例數？ (請先排除表頭與境外移入)</li>
</ol>
<ul>
<li><code>tail -n+2 cov19.csv | grep -v &quot;空值&quot; | cut -d , -f 3,4 | sort | uniq | wc -l</code></li>
</ul>
<ol start="5">
<li>請問至今為止的累計確定病例數。</li>
</ol>
<ul>
<li><code>awk -F ',' '{sum+=$8;} END{print sum;}' cov19.csv</code></li>
<li><code>tail -n+2 cov19.csv | awk -F ',' '{sum+=$8;} END{print sum;}'</code></li>
</ul>
<ol start="6">
<li>請問至今為止，境外移入的累計確定病例數。</li>
</ol>
<ul>
<li><code>tail -n+2 cov19.csv | grep &quot;空值&quot; | awk -F ',' '{sum+=$8;} END{print sum;}'</code></li>
<li><code>awk -F ',' '{if($6==&quot;是&quot;) print $0}' cov19.csv | awk -F ',' '{sum+=$8;} END{print sum;}'</code></li>
</ul>
<ol start="7">
<li>請問至今為止，本土的累計確定病例數。</li>
</ol>
<ul>
<li><code>tail -n+2 cov19.csv | grep -v &quot;空值&quot; | awk -F ',' '{sum+=$8;} END{print sum;}'</code></li>
<li><code>awk -F ',' '{if($6==&quot;否&quot;) print $0}' cov19.csv | awk -F ',' '{sum+=$8;} END{print sum;}'</code></li>
</ul>
<ol start="8">
<li>請問2021年5月期間，新北市永和區的累計確定病例數。</li>
</ol>
<ul>
<li><code>grep &quot;新北市,永和區&quot; cov19.csv | grep &quot;2021/05&quot; | awk -F ',' '{sum+=$8;} END{print sum;}'</code></li>
<li><code>awk -F ',' '{if($3==&quot;新北市&quot; &amp;&amp; $4==&quot;永和區&quot; &amp;&amp; substr($2,1,7)==&quot;2021/05&quot;) print $0}' cov19.csv | awk -F ',' '{sum+=$8;} END{print sum;}'</code></li>
</ul>
<ol start="9">
<li>請依照各縣市鄉鎮為單位，計算其累計確定病例數，並由高至低降冪排序。</li>
</ol>
<ul>
<li><code>tail -n+2 cov19.csv | awk -F ',' '{sum[$3&quot; &quot;$4]+=$8} END{for(key in sum) print key, sum[key];}' | sort -n -r -k3</code></li>
</ul>
<hr>
<ul>
<li>
<p>補充：Git bash 提供的工具：<strong>bash.exe</strong></p>
<ul>
<li>位置：C:\Program Files\Git\bin\bash.exe</li>
<li>功能：協助在 Windows 作業系統中執行 shell 檔案。</li>
<li>語法：bash.exe [欲執行的shell檔案] [參數1] [參數2] &hellip;</li>
</ul>
</li>
<li>
<p>補充：crontab</p>
<ul>
<li>功能：例行性工作排程工具。 (git bash 無此功能)</li>
<li>語法：crontab [-l|-e|-r]</li>
<li>選項與參數：
<ul>
<li>-e ：編輯 crontab 的工作內容。</li>
<li>-l ：查閱 crontab 的工作內容。</li>
<li>-r ：移除所有的 crontab 的工作內容，若僅要移除一項，請用 -e 去編輯。</li>
</ul>
</li>
<li>參考網址：https://linux.vbird.org/linux_basic/centos7/0430cron.php#cron</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># 範例：在每天的凌晨 1:00 執行 /home/trinity/backup_work.sh 作業</span>
</span></span><span style="display:flex;"><span>$ crontab -e
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 此時會進入 vi 的編輯畫面，每項工作都是一列</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">1</span>  *  *  * /home/trinity/backup_work.sh
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ crontab -l
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">1</span>  *  *  * /home/trinity/backup_work.sh
</span></span></code></pre></div><hr>

        </div>
        

    


<div class="post-info">
    
        <div class="post-date dt-published">2022-01-01</div>
    

    <a class="post-hidden-url u-url" href="/posts/handout_02_linux_basic_introduction/">/posts/handout_02_linux_basic_introduction/</a>
    <a href="" class="p-name p-author post-hidden-author h-card" rel="me">Alfred Chen</a>


    <div class="post-taxonomies">
        
            <ul class="post-categories">
                
                    
                    <li><a href="/categories/%E6%95%99%E5%AD%B8%E7%AD%86%E8%A8%98/">教學筆記</a></li>
                
            </ul>
            
            
                <ul class="post-tags">
                    
                        
                        <li><a href="/tags/linux/">#linux</a></li>
                    
                        
                        <li><a href="/tags/shell/">#shell</a></li>
                    
                </ul>
        
    </div>
</div>

    </article>

    

    
        
    <div class="pagination post-pagination">
        <div class="left pagination-item ">
            
                <a href="/posts/handout_01_basic_introduction/">Alfred 的教學筆記 01 - 編碼、檔案、斷行字元、Excel、其他基礎知識介紹</a>
            
        </div>
        <div class="right pagination-item ">
            
                <a href="/posts/handout_03_awk_introduction/">Alfred 的教學筆記 03 - awk 指令介紹</a>
            
        </div>
    </div>




    

    
        




    





<article class="post">
<script
    data-isso="https://comments.example.com/"
    data-isso-id="thread-id"
    data-isso-css="true"
    data-isso-lang="tw"
    data-isso-reply-to-self="true"
    data-isso-require-author="true"
    data-isso-require-email="true"
    data-isso-avatar="true"
    data-isso-avatar-bg="#f0f0f0"
    data-isso-feed="false"
    src="https://comments.example.com/js/embed.min.js">
</script>
<noscript>Please enable JavaScript to view the comments powered by <a href="https://posativ.org/isso/">Isso</a>.</noscript>
<div>
  <section id="isso-thread"></section>
</div>
</article>





    

        </main>
        
            <footer class="common-footer">
    
    

    <div class="common-footer-bottom">
        
        <div class="copyright">
            <p>© Alfred Chen, 2022<br>
            Powered by <a target="_blank" rel="noopener noreferrer" href="https://gohugo.io/">Hugo</a>, theme <a target="_blank" rel="noopener noreferrer" href="https://github.com/mitrichius/hugo-theme-anubis">Anubis</a>.<br>
            
            </p>  
        </div> 

        

    



    <button class="theme-switcher">
        Dark theme
    </button>


<script>
const STORAGE_KEY = 'user-color-scheme'
const defaultTheme = "dark"

let currentTheme
let switchButton
let autoDefinedScheme = window.matchMedia('(prefers-color-scheme: dark)')

const autoChangeScheme = e => {
    currentTheme = e.matches ? 'dark' : 'light'
    document.documentElement.setAttribute('data-theme', currentTheme)
    changeButtonText()
}

document.addEventListener('DOMContentLoaded', function() {
    switchButton = document.querySelector('.theme-switcher')
    currentTheme = detectCurrentScheme()
    if (currentTheme == 'dark') {
        document.documentElement.setAttribute('data-theme', 'dark')
    }
    if (currentTheme == 'auto') {
        autoChangeScheme(autoDefinedScheme);
        autoDefinedScheme.addListener(autoChangeScheme);
    }

    if (switchButton) {
        changeButtonText()
        switchButton.addEventListener('click', switchTheme, false)
    }
  
    showContent()
})

function detectCurrentScheme() {
    if (localStorage.getItem(STORAGE_KEY)) {
        return localStorage.getItem(STORAGE_KEY)
    } 
    if (defaultTheme) {
        return defaultTheme
    } 
    if (!window.matchMedia) {
        return 'light'
    } 
    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        return 'dark'
    }
    return 'light'
}

function changeButtonText()
{   
    if (switchButton) {
        switchButton.textContent = currentTheme == 'dark' ?  "Light theme" : "Dark theme"
    }
}

function switchTheme(e) {
    if (currentTheme == 'dark') {
        localStorage.setItem(STORAGE_KEY, 'light')
        document.documentElement.setAttribute('data-theme', 'light')
        currentTheme = 'light'
    } else {
        localStorage.setItem(STORAGE_KEY, 'dark')
        document.documentElement.setAttribute('data-theme', 'dark')
        currentTheme = 'dark'
    }
    changeButtonText()
}

function showContent() {
    document.body.style.visibility = 'visible';
    document.body.style.opacity = 1;
}
</script>   
    </div>

    <p class="h-card vcard">

    <a href= class="p-name u-url url fn" rel="me">Alfred Chen</a> 

     
        /
        <a class="p-email u-email email" rel="me" href="mailto:mail@example.org">mail@example.org</a>
    

     
        <img class="u-photo" src="/images/me.png" />
    
</p> 
</footer>

        
    </div>
</body>
</html>
